<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>transform package &#8212; brightwind  documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          brightwind</a>
        <span class="navbar-text navbar-version pull-left"><b>1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="Demos.html">Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="Tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="API.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="how_to_contribute.html">How to contribute?</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">transform package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-transform.transform">transform.transform module</a></li>
<li><a class="reference internal" href="#module-transform">Module contents</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/transform.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="transform-package">
<h1>transform package<a class="headerlink" href="#transform-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-transform.transform">
<span id="transform-transform-module"></span><h2>transform.transform module<a class="headerlink" href="#module-transform.transform" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="transform.transform.average_data_by_period">
<code class="descclassname">transform.transform.</code><code class="descname">average_data_by_period</code><span class="sig-paren">(</span><em>data: pandas.core.series.Series</em>, <em>period</em>, <em>aggregation_method='mean'</em>, <em>filter_by_coverage_threshold=False</em>, <em>coverage_threshold=1</em>, <em>return_coverage=False</em><span class="sig-paren">)</span> &#x2192; pandas.core.frame.DataFrame<a class="reference internal" href="_modules/transform/transform.html#average_data_by_period"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#transform.transform.average_data_by_period" title="Permalink to this definition">¶</a></dt>
<dd><p>Averages the data by the time period specified by period.</p>
<p>Aggregates data by the aggregation_method specified, by default averages the to the period specified. Can
be used to find hourly, daily, weekly, etc. averages or sums. Can also return coverage and filter the returned data
by coverage.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<em>pandas.Series</em>) – Data to find average or aggregate of</li>
<li><strong>period</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em> or </em><em>pandas.DateOffset</em>) – <p>Groups data by the period specified here. The following formats are supported</p>
<ul>
<li>Set period to 10min for 10 minute average, 20min for 20 minute average and so on for 4min, 15min, etc.</li>
<li>Set period to 1H for hourly average, 3H for three hourly average and so on for 5H, 6H etc.</li>
<li>Set period to 1D for a daily average, 3D for three day average, similarly 5D, 7D, 15D etc.</li>
<li>Set period to 1W for a weekly average, 3W for three week average, similarly 2W, 4W etc.</li>
<li>Set period to 1M for monthly average</li>
<li>Set period to 1AS fo annual average</li>
<li>Can be a DateOffset object too</li>
</ul>
</li>
<li><strong>aggregation_method</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Default <cite>mean</cite>, returns the mean of the data for the specified period. Can also use
<cite>median</cite>, <cite>prod</cite>, <cite>sum</cite>, <cite>std</cite>,`var`, <cite>max</cite>, <cite>min</cite> which are shorthands for median, product, summation,
standard deviation, variance, maximum and minimum respectively.</li>
<li><strong>filter_by_coverage_threshold</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – It removes the time periods where the coverage is below coverage_threshold.
Coverage is defined as the ratio of number of data points present in the period and the maximum number of
data points that a period should have. Example, for 10 minute data resolution and a period of 1 hour the
maximum number of data points in one period is 6. But if the number if data points available is only 3 for that
hour the coverage is 3/6=0.5</li>
<li><strong>coverage_threshold</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – It should be greater than 0 and less than or equal to 1. For definition of coverage see
filter_by_coverage_threshold. Default is 1 i.e. if any timestamp is missing for that period, remove that period.</li>
<li><strong>return_coverage</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – If True appends and additional column in the DataFrame returned, with coverage calculated for
each period. The columns with coverage are named as &lt;column name&gt;_Coverage</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A DataFrame with data aggregated with the specified aggregation_method (mean by default). Additionally it
could be filtered based on coverage and have a coverage column depending on the parameters.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">DataFrame</p>
</td>
</tr>
</tbody>
</table>
<p><strong>Example usage</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">brightwind</span> <span class="k">as</span> <span class="nn">bw</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">bw</span><span class="o">.</span><span class="n">load_campbell_scientific</span><span class="p">(</span><span class="n">bw</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">demo_site_data</span><span class="p">)</span>

<span class="c1">#To find hourly averages</span>
<span class="n">data_hourly</span> <span class="o">=</span> <span class="n">bw</span><span class="o">.</span><span class="n">average_data_by_period</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">Spd80mN</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="s1">&#39;1H&#39;</span><span class="p">)</span>

<span class="c1">#To find monthly averages</span>
<span class="n">data_monthly</span> <span class="o">=</span> <span class="n">bw</span><span class="o">.</span><span class="n">average_data_by_period</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">Spd80mN</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="s1">&#39;1M&#39;</span><span class="p">)</span>

<span class="c1">#To filter months where half of the data is missing</span>
<span class="n">data_monthly_filtered</span> <span class="o">=</span> <span class="n">bw</span><span class="o">.</span><span class="n">average_data_by_period</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">Spd80mN</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="s1">&#39;1M&#39;</span><span class="p">,</span>
    <span class="n">filter_by_coverage_threshold</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">coverage_threshold</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

<span class="c1">#To check the coverage for all months</span>
<span class="n">data_monthly_filtered</span> <span class="o">=</span> <span class="n">bw</span><span class="o">.</span><span class="n">average_data_by_period</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">Spd80mN</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="s1">&#39;1M&#39;</span><span class="p">,</span>  <span class="n">return_coverage</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="transform.transform.adjust_slope_offset">
<code class="descclassname">transform.transform.</code><code class="descname">adjust_slope_offset</code><span class="sig-paren">(</span><em>wspd</em>, <em>current_slope</em>, <em>current_offset</em>, <em>new_slope</em>, <em>new_offset</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/transform/transform.html#adjust_slope_offset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#transform.transform.adjust_slope_offset" title="Permalink to this definition">¶</a></dt>
<dd><p>Adjust a wind speed that already has a slope and offset applied with a new slope and offset.
Can take either a single wind speed value or a pandas DataFrame/series.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>wspd</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em> or </em><em>pd.DataFrame</em><em> or </em><em>pd.Series</em>) – The wind speed value or series to be adjusted.</li>
<li><strong>current_slope</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The current slope that was applied to create the wind speed.</li>
<li><strong>current_offset</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The current offset that was applied to create the wind speed.</li>
<li><strong>new_slope</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The new desired slope to adjust the wind speed by.</li>
<li><strong>new_offset</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The new desired offset to adjust the wind speed by.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The adjusted wind speed as a single value or pandas DataFrame.</p>
</td>
</tr>
</tbody>
</table>
<p>The new wind speed is calculated by equating the old and new y=mx+c equations around x and then solving for
the new wind speed.</p>
<p>y2 = m2*x + c2   and   y1 = m1*x + c1</p>
<p>y2 = m2*(y1 - c1)/m1 + c2</p>
<p><strong>Example usage</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">brightwind</span> <span class="k">as</span> <span class="nn">bw</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">bw</span><span class="o">.</span><span class="n">load_campbell_scientific</span><span class="p">(</span><span class="n">bw</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">demo_site_data</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;Spd80mS_adj&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bw</span><span class="o">.</span><span class="n">adjust_slope_offset</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">Spd80mS</span><span class="p">,</span> <span class="mf">0.044</span><span class="p">,</span> <span class="mf">0.235</span><span class="p">,</span> <span class="mf">0.04365</span><span class="p">,</span> <span class="mf">0.236</span><span class="p">)</span>
<span class="n">df</span><span class="p">[[</span><span class="s1">&#39;Spd80mS&#39;</span><span class="p">,</span> <span class="s1">&#39;Spd80mS_adj&#39;</span><span class="p">]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="transform.transform.scale_wind_speed">
<code class="descclassname">transform.transform.</code><code class="descname">scale_wind_speed</code><span class="sig-paren">(</span><em>spd</em>, <em>scale_factor: float</em><span class="sig-paren">)</span> &#x2192; pandas.core.series.Series<a class="reference internal" href="_modules/transform/transform.html#scale_wind_speed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#transform.transform.scale_wind_speed" title="Permalink to this definition">¶</a></dt>
<dd><p>Scales wind speed by the scale_factor</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>spd</strong> – Series or data frame or a single value of wind speed to scale</li>
<li><strong>scale_factor</strong> – Scaling factor in decimal, if scaling factor is 0.8 output would be (1+0.8) times wind speed,</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>if it is -0.8 the output would be (1-0.8) times the wind speed
:return: Series or data frame with scaled wind speeds</p>
</dd></dl>

<dl class="function">
<dt id="transform.transform.offset_wind_direction">
<code class="descclassname">transform.transform.</code><code class="descname">offset_wind_direction</code><span class="sig-paren">(</span><em>wdir</em>, <em>offset: float</em><span class="sig-paren">)</span> &#x2192; pandas.core.series.Series<a class="reference internal" href="_modules/transform/transform.html#offset_wind_direction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#transform.transform.offset_wind_direction" title="Permalink to this definition">¶</a></dt>
<dd><p>Add/ subtract offset from wind direction. Keeps the ranges between 0 to 360
:param wdir: Series or data frame or a single direction to offset
:param offset: Offset in degrees can be negative or positive
:return: Series or data frame with offsetted directions</p>
</dd></dl>

</div>
<div class="section" id="module-transform">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-transform" title="Permalink to this headline">¶</a></h2>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2018, BrightWind Analysis.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.9.<br/>
    </p>
  </div>
</footer>
  </body>
</html>