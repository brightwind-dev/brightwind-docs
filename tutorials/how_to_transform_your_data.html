<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>How to transform your data &#8212; brightwind  documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          brightwind</a>
        <span class="navbar-text navbar-version pull-left"><b>0.1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../index.html">Home</a></li>
                <li><a href="tutorial_welcome.html">Tutorials</a></li>
                <li><a href="../api.html">API</a></li>
                <li><a href="../community.html">Community</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"></ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">How to transform your data</a><ul>
<li><a class="reference internal" href="#Outline:">Outline:</a></li>
<li><a class="reference internal" href="#1.-Importing-the-brightwind-library-and-loading-some-sample-data">1. Importing the brightwind library and loading some sample data</a></li>
<li><a class="reference internal" href="#2.-Using-the-scale_wind_speed()-function">2. Using the <code class="docutils literal notranslate"><span class="pre">scale_wind_speed()</span></code> function</a></li>
<li><a class="reference internal" href="#3.-Using-the-average_data_by_period()-function">3. Using the <code class="docutils literal notranslate"><span class="pre">average_data_by_period()</span></code> function</a></li>
<li><a class="reference internal" href="#4.-Using-the-adjust_slope_offset()-function">4. Using the <code class="docutils literal notranslate"><span class="pre">adjust_slope_offset()</span></code> function</a></li>
<li><a class="reference internal" href="#5.-Using-the-offset_wind_direction()-function">5. Using the <code class="docutils literal notranslate"><span class="pre">offset_wind_direction()</span></code> function</a></li>
<li><a class="reference internal" href="#6.-Using-the-offset_timestamps()-function">6. Using the <code class="docutils literal notranslate"><span class="pre">offset_timestamps()</span></code> function</a></li>
<li><a class="reference internal" href="#7.-Using-the-selective_avg()-function">7. Using the <code class="docutils literal notranslate"><span class="pre">selective_avg()</span></code> function</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    <div class="col-md-9 content">
      
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 7ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<center><div class="section" id="How-to-transform-your-data">
<h1>How to transform your data<a class="headerlink" href="#How-to-transform-your-data" title="Permalink to this headline">¶</a></h1>
</center><hr class="docutils" />
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Last updated: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1"> %B, %Y&#39;</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Last updated: 26 June, 2019
</pre></div></div>
</div>
<hr class="docutils" />
<div style="margin-top: 3em; margin-bottom: 3em;"></div><div class="section" id="Outline:">
<h2>Outline:<a class="headerlink" href="#Outline:" title="Permalink to this headline">¶</a></h2>
<p>This tutorial demonstrates how to use the following functions to transform a sample dataset in various ways. The tutorial covers the following steps:</p>
<ol class="arabic simple">
<li><p>Importing the brightwind library and loading some sample data</p></li>
<li><p>Using the <code class="docutils literal notranslate"><span class="pre">scale_wind_speed()</span></code> function</p></li>
<li><p>Using the <code class="docutils literal notranslate"><span class="pre">average_data_by_period()</span></code> function</p></li>
<li><p>Using the <code class="docutils literal notranslate"><span class="pre">adjust_slope_offset()</span></code> function</p></li>
<li><p>Using the <code class="docutils literal notranslate"><span class="pre">offset_wind_direction()</span></code> function</p></li>
<li><p>Using the <code class="docutils literal notranslate"><span class="pre">offset_timestamps()</span></code> function</p></li>
<li><p>Using the <code class="docutils literal notranslate"><span class="pre">selective_avg()</span></code> function</p></li>
</ol>
<hr class="docutils" />
<div style="margin-top: 3em; margin-bottom: 3em;"></div></div>
<div class="section" id="1.-Importing-the-brightwind-library-and-loading-some-sample-data">
<h2>1. Importing the brightwind library and loading some sample data<a class="headerlink" href="#1.-Importing-the-brightwind-library-and-loading-some-sample-data" title="Permalink to this headline">¶</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">brightwind</span> <span class="k">as</span> <span class="nn">bw</span>
</pre></div>
</div>
</div>
<p>The following commands will load the exisiting dataset and show the first few timestamps.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># load existing sample dataset</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">bw</span><span class="o">.</span><span class="n">load_csv</span><span class="p">(</span><span class="n">bw</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">demo_data</span><span class="p">)</span>

<span class="c1"># show first few rows of dataframe</span>
<span class="n">data</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Spd80mN</th>
      <th>Spd80mS</th>
      <th>Spd60mN</th>
      <th>Spd60mS</th>
      <th>Spd40mN</th>
      <th>Spd40mS</th>
      <th>Spd80mNStd</th>
      <th>Spd80mSStd</th>
      <th>Spd60mNStd</th>
      <th>Spd60mSStd</th>
      <th>...</th>
      <th>Dir78mSStd</th>
      <th>Dir58mS</th>
      <th>Dir58mSStd</th>
      <th>Dir38mS</th>
      <th>Dir38mSStd</th>
      <th>T2m</th>
      <th>RH2m</th>
      <th>P2m</th>
      <th>PrcpTot</th>
      <th>BattMin</th>
    </tr>
    <tr>
      <th>Timestamp</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2016-01-09 15:30:00</th>
      <td>8.370</td>
      <td>7.911</td>
      <td>8.160</td>
      <td>7.849</td>
      <td>7.857</td>
      <td>7.626</td>
      <td>1.240</td>
      <td>1.075</td>
      <td>1.060</td>
      <td>0.947</td>
      <td>...</td>
      <td>6.100</td>
      <td>110.1</td>
      <td>6.009</td>
      <td>112.2</td>
      <td>5.724</td>
      <td>0.711</td>
      <td>100.0</td>
      <td>935.0</td>
      <td>0.0</td>
      <td>12.94</td>
    </tr>
    <tr>
      <th>2016-01-09 15:40:00</th>
      <td>8.250</td>
      <td>7.961</td>
      <td>8.100</td>
      <td>7.884</td>
      <td>7.952</td>
      <td>7.840</td>
      <td>0.897</td>
      <td>0.875</td>
      <td>0.900</td>
      <td>0.855</td>
      <td>...</td>
      <td>5.114</td>
      <td>110.9</td>
      <td>4.702</td>
      <td>109.8</td>
      <td>5.628</td>
      <td>0.630</td>
      <td>100.0</td>
      <td>935.0</td>
      <td>0.0</td>
      <td>12.95</td>
    </tr>
    <tr>
      <th>2016-01-09 17:00:00</th>
      <td>7.652</td>
      <td>7.545</td>
      <td>7.671</td>
      <td>7.551</td>
      <td>7.531</td>
      <td>7.457</td>
      <td>0.756</td>
      <td>0.703</td>
      <td>0.797</td>
      <td>0.749</td>
      <td>...</td>
      <td>4.172</td>
      <td>113.1</td>
      <td>3.447</td>
      <td>111.8</td>
      <td>4.016</td>
      <td>1.126</td>
      <td>100.0</td>
      <td>934.0</td>
      <td>0.0</td>
      <td>12.75</td>
    </tr>
    <tr>
      <th>2016-01-09 17:10:00</th>
      <td>7.382</td>
      <td>7.325</td>
      <td>6.818</td>
      <td>6.689</td>
      <td>6.252</td>
      <td>6.174</td>
      <td>0.844</td>
      <td>0.810</td>
      <td>0.897</td>
      <td>0.875</td>
      <td>...</td>
      <td>4.680</td>
      <td>118.8</td>
      <td>5.107</td>
      <td>115.6</td>
      <td>5.189</td>
      <td>0.954</td>
      <td>100.0</td>
      <td>934.0</td>
      <td>0.0</td>
      <td>12.71</td>
    </tr>
    <tr>
      <th>2016-01-09 17:20:00</th>
      <td>7.977</td>
      <td>7.791</td>
      <td>8.110</td>
      <td>7.915</td>
      <td>8.140</td>
      <td>7.974</td>
      <td>0.556</td>
      <td>0.528</td>
      <td>0.562</td>
      <td>0.524</td>
      <td>...</td>
      <td>3.123</td>
      <td>115.9</td>
      <td>2.960</td>
      <td>113.6</td>
      <td>3.540</td>
      <td>0.863</td>
      <td>100.0</td>
      <td>934.0</td>
      <td>0.0</td>
      <td>12.69</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 29 columns</p>
</div></div>
</div>
<hr class="docutils" />
<div style="margin-top: 3em; margin-bottom: 3em;"></div></div>
<div class="section" id="2.-Using-the-scale_wind_speed()-function">
<h2>2. Using the <code class="docutils literal notranslate"><span class="pre">scale_wind_speed()</span></code> function<a class="headerlink" href="#2.-Using-the-scale_wind_speed()-function" title="Permalink to this headline">¶</a></h2>
<p>The following commands specify an arbitrary scale factor and apply this to one of the speed variables.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># specify scale factor</span>
<span class="n">scale_factor</span> <span class="o">=</span> <span class="mf">1.03</span>

<span class="c1"># apply scale factor to Spd80mN variable</span>
<span class="n">Spd80mN_scaled</span> <span class="o">=</span> <span class="n">bw</span><span class="o">.</span><span class="n">scale_wind_speed</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">Spd80mN</span><span class="p">,</span> <span class="n">scale_factor</span><span class="p">)</span>

<span class="c1"># print first 5 rows of result</span>
<span class="n">Spd80mN_scaled</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>Timestamp
2016-01-09 15:30:00    8.62110
2016-01-09 15:40:00    8.49750
2016-01-09 17:00:00    7.88156
2016-01-09 17:10:00    7.60346
2016-01-09 17:20:00    8.21631
Name: Spd80mN, dtype: float64
</pre></div>
</div>
</div>
<p>Now we’ll repeat the same step, this time saving the resulting data in the existing dataframe. The new variable appears as the last column on the right hand side of the returned dataframe.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># apply scale factor to Spd80mN variable, creating a new variable in the existing dataframe</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;Spd80mN_scaled&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bw</span><span class="o">.</span><span class="n">scale_wind_speed</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">Spd80mN</span><span class="p">,</span> <span class="n">scale_factor</span><span class="p">)</span>

<span class="c1"># show first few rows of updated dataframe, scaled wind speed is included in the last column</span>
<span class="n">data</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Spd80mN</th>
      <th>Spd80mS</th>
      <th>Spd60mN</th>
      <th>Spd60mS</th>
      <th>Spd40mN</th>
      <th>Spd40mS</th>
      <th>Spd80mNStd</th>
      <th>Spd80mSStd</th>
      <th>Spd60mNStd</th>
      <th>Spd60mSStd</th>
      <th>...</th>
      <th>Dir58mS</th>
      <th>Dir58mSStd</th>
      <th>Dir38mS</th>
      <th>Dir38mSStd</th>
      <th>T2m</th>
      <th>RH2m</th>
      <th>P2m</th>
      <th>PrcpTot</th>
      <th>BattMin</th>
      <th>Spd80mN_scaled</th>
    </tr>
    <tr>
      <th>Timestamp</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2016-01-09 15:30:00</th>
      <td>8.370</td>
      <td>7.911</td>
      <td>8.160</td>
      <td>7.849</td>
      <td>7.857</td>
      <td>7.626</td>
      <td>1.240</td>
      <td>1.075</td>
      <td>1.060</td>
      <td>0.947</td>
      <td>...</td>
      <td>110.1</td>
      <td>6.009</td>
      <td>112.2</td>
      <td>5.724</td>
      <td>0.711</td>
      <td>100.0</td>
      <td>935.0</td>
      <td>0.0</td>
      <td>12.94</td>
      <td>8.62110</td>
    </tr>
    <tr>
      <th>2016-01-09 15:40:00</th>
      <td>8.250</td>
      <td>7.961</td>
      <td>8.100</td>
      <td>7.884</td>
      <td>7.952</td>
      <td>7.840</td>
      <td>0.897</td>
      <td>0.875</td>
      <td>0.900</td>
      <td>0.855</td>
      <td>...</td>
      <td>110.9</td>
      <td>4.702</td>
      <td>109.8</td>
      <td>5.628</td>
      <td>0.630</td>
      <td>100.0</td>
      <td>935.0</td>
      <td>0.0</td>
      <td>12.95</td>
      <td>8.49750</td>
    </tr>
    <tr>
      <th>2016-01-09 17:00:00</th>
      <td>7.652</td>
      <td>7.545</td>
      <td>7.671</td>
      <td>7.551</td>
      <td>7.531</td>
      <td>7.457</td>
      <td>0.756</td>
      <td>0.703</td>
      <td>0.797</td>
      <td>0.749</td>
      <td>...</td>
      <td>113.1</td>
      <td>3.447</td>
      <td>111.8</td>
      <td>4.016</td>
      <td>1.126</td>
      <td>100.0</td>
      <td>934.0</td>
      <td>0.0</td>
      <td>12.75</td>
      <td>7.88156</td>
    </tr>
    <tr>
      <th>2016-01-09 17:10:00</th>
      <td>7.382</td>
      <td>7.325</td>
      <td>6.818</td>
      <td>6.689</td>
      <td>6.252</td>
      <td>6.174</td>
      <td>0.844</td>
      <td>0.810</td>
      <td>0.897</td>
      <td>0.875</td>
      <td>...</td>
      <td>118.8</td>
      <td>5.107</td>
      <td>115.6</td>
      <td>5.189</td>
      <td>0.954</td>
      <td>100.0</td>
      <td>934.0</td>
      <td>0.0</td>
      <td>12.71</td>
      <td>7.60346</td>
    </tr>
    <tr>
      <th>2016-01-09 17:20:00</th>
      <td>7.977</td>
      <td>7.791</td>
      <td>8.110</td>
      <td>7.915</td>
      <td>8.140</td>
      <td>7.974</td>
      <td>0.556</td>
      <td>0.528</td>
      <td>0.562</td>
      <td>0.524</td>
      <td>...</td>
      <td>115.9</td>
      <td>2.960</td>
      <td>113.6</td>
      <td>3.540</td>
      <td>0.863</td>
      <td>100.0</td>
      <td>934.0</td>
      <td>0.0</td>
      <td>12.69</td>
      <td>8.21631</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 30 columns</p>
</div></div>
</div>
<p>Finally, we can compare the mean values of the scaled and unscaled speed time series. The ratio of these mean values is shown to equal the intended scale factor.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># print unscaled mean speed</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The unscaled mean speed is: </span><span class="se">\t</span><span class="s1"> </span><span class="si">{}</span><span class="s1"> m/s&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">Spd80mN</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span><span class="mi">2</span><span class="p">)))</span>

<span class="c1"># print scaled mean speed</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The scaled mean speed is: </span><span class="se">\t</span><span class="s1"> </span><span class="si">{}</span><span class="s1"> m/s&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">Spd80mN_scaled</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span><span class="mi">2</span><span class="p">)))</span>

<span class="c1"># calculate ratio of mean values</span>
<span class="n">ratio</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">Spd80mN_scaled</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">/</span><span class="n">data</span><span class="o">.</span><span class="n">Spd80mN</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="c1"># print ratio of mean values</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The ratio of these values is: </span><span class="se">\t</span><span class="s1"> </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">ratio</span><span class="p">,</span><span class="mi">2</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
The unscaled mean speed is:      7.5 m/s
The scaled mean speed is:        7.72 m/s
The ratio of these values is:    1.03
</pre></div></div>
</div>
<hr class="docutils" />
<div style="margin-top: 3em; margin-bottom: 3em;"></div></div>
<div class="section" id="3.-Using-the-average_data_by_period()-function">
<h2>3. Using the <code class="docutils literal notranslate"><span class="pre">average_data_by_period()</span></code> function<a class="headerlink" href="#3.-Using-the-average_data_by_period()-function" title="Permalink to this headline">¶</a></h2>
<p>This function can be used to apply a window average to data, using a window which can be specified as any number of minutes (‘min’), hours (‘H’), days (‘D’), weeks (‘W’). ‘1M’ and ‘1AS’ can also used for monthly and annual averages respectively. The output is created within a new series.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># then derive monthly averages</span>
<span class="n">data_monthly</span> <span class="o">=</span> <span class="n">bw</span><span class="o">.</span><span class="n">average_data_by_period</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">Spd80mN</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="s1">&#39;1M&#39;</span><span class="p">)</span>

<span class="c1"># show monthly averaged data for first 5 months</span>
<span class="n">data_monthly</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>Timestamp
2016-01-01    9.252377
2016-02-01    8.904382
2016-03-01    6.395166
2016-04-01    6.598875
2016-05-01    8.729657
Freq: MS, Name: Spd80mN, dtype: float64
</pre></div>
</div>
</div>
<hr class="docutils" />
<div style="margin-top: 3em; margin-bottom: 3em;"></div></div>
<div class="section" id="4.-Using-the-adjust_slope_offset()-function">
<h2>4. Using the <code class="docutils literal notranslate"><span class="pre">adjust_slope_offset()</span></code> function<a class="headerlink" href="#4.-Using-the-adjust_slope_offset()-function" title="Permalink to this headline">¶</a></h2>
<p>Now, let’s imagine that data from the northern anemometer at 80 m was logged with standard slope and offset values of 0.765 and 0.35, and we need to rescale this data considering slope and offset values from a calibration certificate which is specific to this anemometer. The following command can be used to do this, once again adding a new variable to the dataframe.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Apply slope and offset adjustments</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;Spd80mN_adj&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bw</span><span class="o">.</span><span class="n">adjust_slope_offset</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">Spd80mN</span><span class="p">,</span><span class="mf">0.765</span><span class="p">,</span> <span class="mf">0.35</span><span class="p">,</span> <span class="mf">0.7642</span><span class="p">,</span> <span class="mf">0.352</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Now let’s view the raw and adjusted speed values side-by-side.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># concatenate raw and adjusted variables</span>
<span class="n">summary</span> <span class="o">=</span> <span class="n">data</span><span class="p">[[</span><span class="s1">&#39;Spd80mN&#39;</span><span class="p">,</span> <span class="s1">&#39;Spd80mN_adj&#39;</span><span class="p">]]</span>

<span class="c1"># show first few values</span>
<span class="n">summary</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Spd80mN</th>
      <th>Spd80mN_adj</th>
    </tr>
    <tr>
      <th>Timestamp</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2016-01-09 15:30:00</th>
      <td>8.370</td>
      <td>8.363613</td>
    </tr>
    <tr>
      <th>2016-01-09 15:40:00</th>
      <td>8.250</td>
      <td>8.243739</td>
    </tr>
    <tr>
      <th>2016-01-09 17:00:00</th>
      <td>7.652</td>
      <td>7.646364</td>
    </tr>
    <tr>
      <th>2016-01-09 17:10:00</th>
      <td>7.382</td>
      <td>7.376646</td>
    </tr>
    <tr>
      <th>2016-01-09 17:20:00</th>
      <td>7.977</td>
      <td>7.971024</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<hr class="docutils" />
<div style="margin-top: 3em; margin-bottom: 3em;"></div></div>
<div class="section" id="5.-Using-the-offset_wind_direction()-function">
<h2>5. Using the <code class="docutils literal notranslate"><span class="pre">offset_wind_direction()</span></code> function<a class="headerlink" href="#5.-Using-the-offset_wind_direction()-function" title="Permalink to this headline">¶</a></h2>
<p>Similarly, the following function can be used to apply a scalar offset to direction data from a given wind vane.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># apply directional offset</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;Dir38mS_adj&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bw</span><span class="o">.</span><span class="n">offset_wind_direction</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">Dir38mS</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">)</span>

<span class="c1"># concatenate raw and adjusted variables</span>
<span class="n">summary</span> <span class="o">=</span> <span class="n">data</span><span class="p">[[</span><span class="s1">&#39;Dir38mS&#39;</span><span class="p">,</span> <span class="s1">&#39;Dir38mS_adj&#39;</span><span class="p">]]</span>

<span class="c1"># show first few values</span>
<span class="n">summary</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Dir38mS</th>
      <th>Dir38mS_adj</th>
    </tr>
    <tr>
      <th>Timestamp</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2016-01-09 15:30:00</th>
      <td>112.2</td>
      <td>102.2</td>
    </tr>
    <tr>
      <th>2016-01-09 15:40:00</th>
      <td>109.8</td>
      <td>99.8</td>
    </tr>
    <tr>
      <th>2016-01-09 17:00:00</th>
      <td>111.8</td>
      <td>101.8</td>
    </tr>
    <tr>
      <th>2016-01-09 17:10:00</th>
      <td>115.6</td>
      <td>105.6</td>
    </tr>
    <tr>
      <th>2016-01-09 17:20:00</th>
      <td>113.6</td>
      <td>103.6</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<hr class="docutils" />
<div style="margin-top: 3em; margin-bottom: 3em;"></div></div>
<div class="section" id="6.-Using-the-offset_timestamps()-function">
<h2>6. Using the <code class="docutils literal notranslate"><span class="pre">offset_timestamps()</span></code> function<a class="headerlink" href="#6.-Using-the-offset_timestamps()-function" title="Permalink to this headline">¶</a></h2>
<p>This function can be used to apply an offset to the timestamps within a dataset. A few examples are provided below, first, let’s print the first timestamp of the raw data for comparison.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># print first timestamp</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
2016-01-09 15:30:00
</pre></div></div>
</div>
<p>Now we’ll add 1 hour and 30 minutes to the timestamps of the data and print the first timestamp once again.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># add 90 minutes to timestamps</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">bw</span><span class="o">.</span><span class="n">offset_timestamps</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;1.5H&#39;</span><span class="p">)</span>

<span class="c1"># print first timestamp</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
2016-01-09 17:00:00
</pre></div></div>
</div>
<p>Negative offsets can also be applied.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># subtract 2 hours from timestamps</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">bw</span><span class="o">.</span><span class="n">offset_timestamps</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;-2H&#39;</span><span class="p">)</span>

<span class="c1"># print first timestamp</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
2016-01-09 15:00:00
</pre></div></div>
</div>
<p>Offsets can also be applied in minutes (positive or negative).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># add 7 minutes to timestamps</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">bw</span><span class="o">.</span><span class="n">offset_timestamps</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;7min&#39;</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># print first timestamp</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
2016-01-09 15:07:00
</pre></div></div>
</div>
<p>Time offsets can also be restricted to a certain time period during the record using the following extra arguments. In this case we can see that the final adjustment has just been applied from the 2nd to the 4th timestamps.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># subtract 7 minutes from timestamps between the datetime range below</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">bw</span><span class="o">.</span><span class="n">offset_timestamps</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;-7min&#39;</span><span class="p">,</span> <span class="n">date_from</span><span class="o">=</span><span class="s1">&#39;2016-01-09 15:17:00&#39;</span><span class="p">,</span> <span class="n">date_to</span><span class="o">=</span><span class="s1">&#39;2016-01-09 16:47:00&#39;</span><span class="p">)</span>

<span class="c1"># show all data for first 5 timestamps</span>
<span class="n">data</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Spd80mN</th>
      <th>Spd80mS</th>
      <th>Spd60mN</th>
      <th>Spd60mS</th>
      <th>Spd40mN</th>
      <th>Spd40mS</th>
      <th>Spd80mNStd</th>
      <th>Spd80mSStd</th>
      <th>Spd60mNStd</th>
      <th>Spd60mSStd</th>
      <th>...</th>
      <th>Dir38mS</th>
      <th>Dir38mSStd</th>
      <th>T2m</th>
      <th>RH2m</th>
      <th>P2m</th>
      <th>PrcpTot</th>
      <th>BattMin</th>
      <th>Spd80mN_scaled</th>
      <th>Spd80mN_adj</th>
      <th>Dir38mS_adj</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2016-01-09 15:07:00</th>
      <td>8.370</td>
      <td>7.911</td>
      <td>8.160</td>
      <td>7.849</td>
      <td>7.857</td>
      <td>7.626</td>
      <td>1.240</td>
      <td>1.075</td>
      <td>1.060</td>
      <td>0.947</td>
      <td>...</td>
      <td>112.2</td>
      <td>5.724</td>
      <td>0.711</td>
      <td>100.0</td>
      <td>935.0</td>
      <td>0.0</td>
      <td>12.94</td>
      <td>8.62110</td>
      <td>8.363613</td>
      <td>102.2</td>
    </tr>
    <tr>
      <th>2016-01-09 15:10:00</th>
      <td>8.250</td>
      <td>7.961</td>
      <td>8.100</td>
      <td>7.884</td>
      <td>7.952</td>
      <td>7.840</td>
      <td>0.897</td>
      <td>0.875</td>
      <td>0.900</td>
      <td>0.855</td>
      <td>...</td>
      <td>109.8</td>
      <td>5.628</td>
      <td>0.630</td>
      <td>100.0</td>
      <td>935.0</td>
      <td>0.0</td>
      <td>12.95</td>
      <td>8.49750</td>
      <td>8.243739</td>
      <td>99.8</td>
    </tr>
    <tr>
      <th>2016-01-09 16:30:00</th>
      <td>7.652</td>
      <td>7.545</td>
      <td>7.671</td>
      <td>7.551</td>
      <td>7.531</td>
      <td>7.457</td>
      <td>0.756</td>
      <td>0.703</td>
      <td>0.797</td>
      <td>0.749</td>
      <td>...</td>
      <td>111.8</td>
      <td>4.016</td>
      <td>1.126</td>
      <td>100.0</td>
      <td>934.0</td>
      <td>0.0</td>
      <td>12.75</td>
      <td>7.88156</td>
      <td>7.646364</td>
      <td>101.8</td>
    </tr>
    <tr>
      <th>2016-01-09 16:40:00</th>
      <td>7.382</td>
      <td>7.325</td>
      <td>6.818</td>
      <td>6.689</td>
      <td>6.252</td>
      <td>6.174</td>
      <td>0.844</td>
      <td>0.810</td>
      <td>0.897</td>
      <td>0.875</td>
      <td>...</td>
      <td>115.6</td>
      <td>5.189</td>
      <td>0.954</td>
      <td>100.0</td>
      <td>934.0</td>
      <td>0.0</td>
      <td>12.71</td>
      <td>7.60346</td>
      <td>7.376646</td>
      <td>105.6</td>
    </tr>
    <tr>
      <th>2016-01-09 16:57:00</th>
      <td>7.977</td>
      <td>7.791</td>
      <td>8.110</td>
      <td>7.915</td>
      <td>8.140</td>
      <td>7.974</td>
      <td>0.556</td>
      <td>0.528</td>
      <td>0.562</td>
      <td>0.524</td>
      <td>...</td>
      <td>113.6</td>
      <td>3.540</td>
      <td>0.863</td>
      <td>100.0</td>
      <td>934.0</td>
      <td>0.0</td>
      <td>12.69</td>
      <td>8.21631</td>
      <td>7.971024</td>
      <td>103.6</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 32 columns</p>
</div></div>
</div>
<p>If the timestamp is adjustment is large enough to overlap the unadjusted data before/after the ‘date_from’/’date_to’, by default the function will not overwrite the unadjusted data. The argument ‘overwrite=True’ can be specified to change this default and overwrite the neighbouring timestamps.</p>
<p>Finally, note that the adjusted timestamps can be allocated to a completely new dataframe, leaving the input dataset unchanged.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># create new dataset with 6H added to the original timestamps</span>
<span class="n">data_adj</span> <span class="o">=</span> <span class="n">bw</span><span class="o">.</span><span class="n">offset_timestamps</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;6H&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<div style="margin-top: 3em; margin-bottom: 3em;"></div></div>
<div class="section" id="7.-Using-the-selective_avg()-function">
<h2>7. Using the <code class="docutils literal notranslate"><span class="pre">selective_avg()</span></code> function<a class="headerlink" href="#7.-Using-the-selective_avg()-function" title="Permalink to this headline">¶</a></h2>
<p>This function can be used to create a time series of wind speed using data from two anemometers mounted at the same height, along with one wind vane. For each timestamp in the dataset, the function either averages the two wind speed values or only includes the upstream wind speed value if the other is in the wake of the mast. The wake is defined by winds approaching the mast from the opposite site of the boom within a directional sector of a given size (in this case 60 degrees).</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># derive selective average variable based on two 80 m anemeters and 78 m wind vane</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;sel_avg_80m&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bw</span><span class="o">.</span><span class="n">selective_avg</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">Spd80mN</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">Spd80mS</span><span class="p">,</span> <span class="n">wdir</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">Dir78mS</span><span class="p">,</span> <span class="n">boom_dir_1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">boom_dir_2</span><span class="o">=</span><span class="mi">180</span><span class="p">,</span> <span class="n">sector_width</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># concatenate inputs and new output variable</span>
<span class="n">summary</span> <span class="o">=</span> <span class="n">data</span><span class="p">[[</span><span class="s1">&#39;Spd80mN&#39;</span><span class="p">,</span> <span class="s1">&#39;Spd80mS&#39;</span><span class="p">,</span> <span class="s1">&#39;Dir78mS&#39;</span><span class="p">,</span><span class="s1">&#39;sel_avg_80m&#39;</span><span class="p">]]</span>

<span class="c1"># show the first 5 entries, none of which include waked anemometers</span>
<span class="n">summary</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Spd80mN</th>
      <th>Spd80mS</th>
      <th>Dir78mS</th>
      <th>sel_avg_80m</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2016-01-09 15:07:00</th>
      <td>8.370</td>
      <td>7.911</td>
      <td>114.2</td>
      <td>8.1405</td>
    </tr>
    <tr>
      <th>2016-01-09 15:10:00</th>
      <td>8.250</td>
      <td>7.961</td>
      <td>114.4</td>
      <td>8.1055</td>
    </tr>
    <tr>
      <th>2016-01-09 16:30:00</th>
      <td>7.652</td>
      <td>7.545</td>
      <td>117.8</td>
      <td>7.5985</td>
    </tr>
    <tr>
      <th>2016-01-09 16:40:00</th>
      <td>7.382</td>
      <td>7.325</td>
      <td>124.5</td>
      <td>7.3535</td>
    </tr>
    <tr>
      <th>2016-01-09 16:57:00</th>
      <td>7.977</td>
      <td>7.791</td>
      <td>120.9</td>
      <td>7.8840</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<hr class="docutils" />
<div style="margin-top: 3em; margin-bottom: 3em;"></div></div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2019, BrightWind Analysis.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.1.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>